var searchFunc=function(t,e,r,n,s){$.ajax({url:t,dataType:"json",success:function(t){var a=t,i=document.getElementById(n);if(i){var c=document.getElementById(s),l=document.getElementById(r);i.addEventListener("input",(function(){var t=[],r=function(t){var e,r,n=[];for(e=0;e<t.length;e++)for(r=e+1;r<t.length+1;r++)n.push(t.slice(e,r).join(" "));return n}(this.value.trim().toLowerCase().split(" ")).sort((function(t,e){return e.split(" ").length-t.split(" ").length}));if(c.innerHTML="",this.value.trim().length<=0)l.setAttribute("searching","false");else if(l.setAttribute("searching","true"),a.forEach((function(n){if(n.content?.trim().length){var s=0;if(!e||n.path.includes(e)){var a=n.title?.trim()||"Untitled",i=a.toLowerCase(),c=n.content,l=c.toLowerCase(),u=n.path.startsWith("//")?n.path.slice(1):n.path,o=-1,h=-1,f=-1;if(""!==c&&r.forEach((function(t){o=i.indexOf(t),h=l.indexOf(t),(o>=0||h>=0)&&(s+=1,h<0&&(h=0),f<0&&(f=h))})),s>0){var p={};if(p.rank=s,p.str="<li><a href='"+u+"'><span class='search-result-title'>"+a+"</span>",f>=0){var d=f-20,g=f+80;d<0&&(d=0),0==d&&(g=100),g>c.length&&(g=c.length);var v=c.substring(d,g),m=new RegExp(r.join("|"),"gi");v=v.replace(m,(function(t){return'<span class="search-keyword">'+t+"</span>"})),p.str+='<p class="search-result-content">'+v+"...</p>"}p.str+="</a></li>",t.push(p)}}}})),t.length){t.sort((function(t,e){return e.rank-t.rank}));for(var n='<ul class="search-result-list">',s=0;s<t.length;s++)n+=t[s].str;n+="</ul>",c.innerHTML=n}}))}}})};utils.jq((()=>{var t=$("input#search-input");if(0!=t.length){var e=document.querySelector("div#search-result");t.focus((function(){var e=ctx.search.path;e.startsWith("/")&&(e=e.substring(1)),e=ctx.root+e;const r=t.attr("data-filter")||"";searchFunc(e,r,"search-wrapper","search-input","search-result")})),t.keydown((function(t){13==t.which&&t.preventDefault()})),new MutationObserver((function(t,e){1==t.length&&(t[0].addedNodes.length?$(".search-wrapper").removeClass("noresult"):t[0].removedNodes.length&&$(".search-wrapper").addClass("noresult"))})).observe(e,{childList:!0})}}));